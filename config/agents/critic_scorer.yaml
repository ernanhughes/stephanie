critic_scorer:
  _target_: stephanie.components.critic.agents.critic_scorer.CriticScorerAgent
  name: critic_scorer
  input_key: scorables
  output_key: critic_results
  enabled: true

  model_path: "models/critic.joblib"
  meta_path:  "models/critic.meta.json"

  processor:
    offload_mode: inline
    # extra ScorableProcessor settings…


  # --- VisiCalc-specific settings ---
  visicalc:
    enabled: true

    # Preferred metrics in order (optional override)
    metric_keys: 
      - "HRM.coverage.score"
      - "sicql.coverage.score"
      - "tiny.coverage.score"
      
    frontier_metric: "HRM.aggregate"
    row_region_splits: 4
    frontier_low: 0.25
    frontier_high: 0.75

    # Output directory (per run_id) + optional custom filenames
    out_dir: "runs/visicalc"
    json_file: "visicalc_report.json"
    csv_file: "visicalc_report.csv"

    metric_mapping:
      include:
        - "HRM.*"
        - "sicql.*"
        - "tiny.*"
      exclude:
        - "*.raw"
        - "*.debug"

    vpm_png:
      enabled: true
      mode: "L"                  # "L" or "RGB"
      per_metric_normalize: true # use column-wise min–max
      target_file: "visicalc_targeted_vpm.png"
      baseline_file: "visicalc_baseline_vpm.png"

    top_k_metrics: 50         # or null for "all"
    min_effect: 0.25          # |Cohen's d| threshold

    importance_filter:
      enabled: true
      path: "config/core_metrics.json"
      top_k: 150
      min_effect: 0.1
