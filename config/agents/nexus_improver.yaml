# config/agents/nexus_improver.yaml

nexus_improver:
  name: nexus_improver
  enabled: true
  save_prompt: false
  save_context: false
  skip_if_completed: false

  offload_prompts: true
  k_candidates: 2
  sharpen_iters: 1
  novelty_tau: 0.12
  promote_margin: 0.02

  dims: ["alignment","faithfulness","coverage","clarity","coherence"]
  scorers: ["sicql","mrq","hrm"]
  scorer_weights: { sicql: 1.0, mrq: 0.8, hrm: 0.6 }
  dimension_weights:
    alignment: 1.2
    faithfulness: 1.0
    coverage: 0.9
    clarity: 0.6
    coherence: 0.6
  persist_scores: false
  use_llm_heuristic: false

  offload_mode: await         # or fire_and_forget
  max_inflight: 96
  response_timeout_s: 75
  blossom:
    offload_prompts: true
    model:
      name: ollama/qwen:0.5b
      api_base: http://localhost:11434
      api_key: null
    target_pool: provider
    run_root: runs

  scoring:
    scorers: ["sicql", "mrq", "hrm", "tiny"]
    dimensions: ["coverage", "reasoning", "knowledge", "clarity", "faithfulness"]
    attach_scores: true          # call ScoringService.score()
    persist_scores: false        # or true if you want ScoreORM rows
    require_metrics_for_vpm: true    